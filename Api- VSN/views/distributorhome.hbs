<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <link rel="stylesheet" href="css\bootstrap.min.css">
        <link rel="stylesheet" href="css\all.min.css">
        <link rel="stylesheet" href="css\vertical-timeline.css">
        <link rel="stylesheet" href="css\style.css">
        <title>Distributor Page for COVID-19 Vaccine Supply Chain</title>

    </head>
    <body data-bs-spy="scroll" data-bs-target="#navbar-example2" data-offset="50">
          <section class="nav-section fixed-top">
            <nav id="navbar-example2" class="navbar navbar-light bg-light px-3">
                <a class="navbar-brand" href="#"></a>
                <ul class="nav nav-pills">
                    <li class="nav-item">
                      <a class="nav-link" href="#home">HOME</a>
                    </li>
                    
                    <li class="nav-item">
                      <a class="nav-link" href="#changeowner1">CHANGE OWNERSHIP</a>
                    </li>
                    <li class="nav-item dropdown">
                      <a class="nav-link dropdown-toggle" data-bs-toggle="dropdown" href="#" role="button" aria-expanded="false"><i class="fas fa-user"></i>{{#if user.name}}{{user.name}}{{/if}}</a>
                      <ul class="dropdown-menu dropdown-menu-end">
                         <li><a class="dropdown-item" href="logout"><i class="fas fa-sign-out-alt"></i>LOGOUT</a></li>
                      </ul>
                    </li>
                </ul>
            </nav>
          </section>
        

    <!------home section for qr upload and section------>
    <section id="home" class="home-section">
      <div class="container">
          <h2 class="text-center px-auto text-white">Welcome to Vaccine Supply Chain</h2>
            <form class="find-sec" action="" action="POST">
              <h5 class="text-white">Upload a QR Code Image</h5>
              <div class="mb-3 text-center">
                <input class="form-control form-upload ml-4" type="file" id="file" onclick="showqrinfo()" name="file">
                 </div>
              </form >
              <div class="text-center" >
              <h4 id="qrcontent" style="display: none;">Your Vaccine number is:</h4>
              <b><span  style="background-color:blue;color:white;font-size:30px" id="content"></span> </b>
              </div>

              
              <script>
                function showqrinfo(){
                  document.getElementById('qrcontent').style.display="block";
                }
               
			        
              </script>

              <script src="js\qrReader.js" type="text/javascript"></script>

              <form class="find-sec" action="/searchvaccine" method="POST">
                <h5 class="text-white">Search Detailed Vaccine Info</h5>
                <input type="text" name="find" class="find-input" aria-describedby="passwordHelpInline" placeholder="Enter vaccine number"/>
                <input type="submit" name="search" class="bg-dark text-white" value="Search">
              </form>

              
              
             
              
             
              {{#if producer}} 
               
             <div id="vt3">
              
    <div data-vtdate={{producer.date}}>
        <h4 class="text-center ">Producer: {{producer.owner}}</h4>
        <h6 class="text-center"><strong>Location</strong></h6>
        <p class="text-center ">
          <strong>Latitude: </strong> {{producer.latitude}}
          <span><strong> Longitude: </strong> {{producer.longitude}}</span>
        </p>
    </div>
  
    {{#if result3}}
    {{#each result3}}
    <div data-vtdate={{this.date}}>
        <h4 class="text-center">Distributor: {{this.owner}}</h4>
        <h6 class="text-center "><strong>Location</strong></h6>
        <p class="text-center">
          <strong>Latitude: </strong> {{this.latitude}}
          <span><strong> Longitude: </strong> {{this.longitude}}</span>
        </p>
    </div>
    {{/each}}
    {{/if}}
     {{#if customer}}
    <div data-vtdate={{customer.date}}>
        <h4 class="text-center">Customer: {{customer.owner}}</h4>
        <h6 class="text-center"><strong>Location</strong></h6>
        <p class="text-center">
          <strong>Latitude: </strong> {{customer.latitude}}
          <span><strong> Longitude: </strong>{{customer.longitude}}</span>
        </p>
    </div>
    
    {{/if}}
    
    
</div>
{{/if}}
 
               
            
    
    
    
</div>

      </div>
        </section>
        
        
     
        

          



          <section id="changeowner1" class="change-section">
            <div class="container">
          
                <h2 class="text-center text-white">Change Ownership of a Vaccine</h2>

                <hr class="change-hr">
                 <h6 class="text-white text-center mt-3">Only current owner of a vaccine can change ownership</h6>
                
              <div class="change-box mt-5">
                <form action="/changeowner1" method="POST">
               <div class="form-group">
                        <label for="vaccinenumber" class="text-white">Vaccine Number</label>
                         <input type="number" class="form-control" name="vaccinenumber" id="vaccinenumber" aria-describedby="vaccinenumber" placeholder="Enter Vaccine Number" required>
                      </div>
                      <div class="form-group">
                        <label for="date" class="text-white">Date</label>
                         <input type="datetime-local" class="form-control" name="date" id="date" aria-describedby="date" required>
                      </div>
                      <div class="form-group">
                        <label for="newowner" class="text-white">New Owner's Name</label>
                         <input type="newowner" class="form-control" id="newowner" name="newowner" aria-describedby="newowner" placeholder="Enter New Owner Name" required>
                      </div>
                      <div class="form-group">
                        <label for="newowner_email" class="text-white">New Owner's Email</label>
                         <input type="text" class="form-control" id="newowner_email" name="newowner_email" aria-describedby="newowner_email" placeholder="Enter New Owner's Email" required>
                      </div>
                      <div>
                        <p class="text-white text-center"><strong>Enter Location</strong></p>
                      </div>
                      <div class="row">
                        <div class="col-6">
                          <div class="form-group">
                        <label for="lati1" class="text-white">Longitude</label>
                         <input type="text" class="form-control" id="lati1" name="lati1" placeholder="Latitude(Ex: 24.886436)" required>
                          
                        </div>

                      </div>
                        <div class="col-6">
                          <div class="form-group">
                        <label for="long" class="text-white">Latitude</label>
                         <input type="text" class="form-control" id="long1" name="long1" placeholder="Longitude(Ex: 91.880722)" required>
                          
                        </div>

                      </div>
                      </div>

                      <div class="row">
               <div class="col-12 text-center">
                 <button type="button" class="btn btn-md btn-red location-btn" onclick="getLocation1()">Find Current Location</button>
               </div>
             </div>
             <p id="demo1" class="text-center text-white mt-3"></p>

            <script>
                var y = document.getElementById("demo1");


                function getLocation1() {
                    if (navigator.geolocation) {
                        navigator.geolocation.getCurrentPosition(showPosition1, showError1);
                    } else {
                        y.innerHTML = "Geolocation is not supported by this browser.";
                    }
                }

                function showPosition1(position) {
                    
                      document.getElementById('lati1').value=position.coords.latitude;
                      document.getElementById('long1').value=position.coords.longitude;
                      y.innerHTML='';
                }

                function showError1(error) {
                    switch (error.code) {
                        case error.PERMISSION_DENIED:
                            y.innerHTML = "User denied the request for Geolocation."
                            break;
                        case error.POSITION_UNAVAILABLE:
                            y.innerHTML = "Location information is unavailable."
                            break;
                        case error.TIMEOUT:
                            y.innerHTML = "The request to get user location timed out."
                            break;
                        case error.UNKNOWN_ERROR:
                            y.innerHTML = "An unknown error occurred."
                            break;
                    }
                }
            </script>
            <div class="row">
              <div class="col-12 text-center text-white">
                <label class=""><strong>Delivering to customer?</strong></label>
                <input class="mx-2" type="radio" id="yes" name="check" value="Yes">
<label for="male">Yes</label>
<input class="mx-2" type="radio" id="no" name="check" value="No" checked>
<label for="female">No</label>

              </div>
            </div>
                 <div class="row">
              <div class="col-12 text-center">
                 <div class="form-group text-center">
                  <button type="submit" class="btn btn-primary change">Change Ownership</button>
            </div> 
            </div>
            </div>
                </form>

              </div>
          </div>

          </section>

        <script src="js\jquery.min.js"></script>
        <script src="js\vertical-timeline.js"></script>
<script>
    $('#vt1').verticalTimeline();
    $('#vt2').verticalTimeline();
    $('#vt3').verticalTimeline({
        startLeft: false
    });
    $('#vt4').verticalTimeline({
        startLeft: false,
        arrows: false,
        alternate: false
    });
    $('#vt5').verticalTimeline({
        animate: 'fade'
    });
    $('#vt6').verticalTimeline({
        animate: 'slide'
    });
</script>
        <script src="js\bootstrap.min.js" ></script>
        <script src="js\qrcode.js"></script>
        <script src="js\all.min.js" ></script>
       
        
        
    </body>
</html>